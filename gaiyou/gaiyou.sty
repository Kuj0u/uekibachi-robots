% 
% rsj2003e.sty を拝借して稲葉がちょこっと編集したコンピュータ応用工学科
% 卒業研究概要集のためのスタイル
% jsarticleと組み合わせて使う
% 2007.12.12 inaba
% 2015.11.18 著者名のレイアウト変更

\typeout{*** Document Style for SOTSURON ***}

\twocolumn
\sloppy
\flushbottom
 \leftmargini 2em
 \leftmarginv .5em
 \leftmarginvi .5em
 \oddsidemargin -36truept
 \evensidemargin -36truept
 \marginparwidth 48truept
 \marginparsep 10truept
 \textwidth 52zw
 \textheight 9.15in
 \topmargin -.3in
 \hbadness=1000
 \tolerance=5000 %(Must be less than 10000=sloppy in Japanese)
 \parindent 1em
 
% myheadingsをもとに，ページ番号をでなくし，ヘッダを挿入するスタイルを定義
\def\ps@labheadings{
  \let\@oddfoot\@empty\let\@evenfoot\@empty
  \def\@oddhead{\textbf{\rightmark}\hfil}
  \def\@evenhead{\textbf{\rightmark}\hfil}
  \let\@mkboth\@gobbletwo
  \let\sectionmark\@gobble
  \let\subsectionmark\@gobble
}


%\input{fleqn.sty}
\columnsep 9truemm
\headheight 12truemm
\headsep 5truemm
%\footskip 0zw
\textheight 250truemm
\textwidth 178truemm
%\addtolength{\textwidth}{\columnsep}
\topmargin 0truemm
\addtolength{\topmargin}{-20truemm}
\oddsidemargin -1in
\addtolength{\oddsidemargin}{14truemm}
%\mathindent 2zw
\parindent 1zw

%\def\document{\endgroup
%  \@colht\textheight  \@colroom\textheight \vsize\textheight
%   \columnwidth\textwidth \@clubpenalty\clubpenalty
%   \if@twocolumn \advance\columnwidth -\columnsep 
%      \divide\columnwidth\tw@ \hsize\columnwidth \@firstcolumntrue 
%   \fi
%  \hsize\columnwidth \linewidth\hsize
%  \begingroup\@floatplacement\@dblfloatplacement
%   \makeatletter\let\@writefile\@gobbletwo
%   \@input{\jobname.aux}\endgroup 
%  \if@filesw \immediate\openout\@mainaux=\jobname.aux
%    \immediate\write\@mainaux{\relax}\fi
%  \def\do##1{\let ##1\@notprerr}%
%  \@preamblecmds
%  \let\do\noexpand  
%  \@normalsize\everypar{}\baselineskip7mm}

\def\title#1{\gdef\@title{#1}}
\def\engtitle#1{\gdef\@engtitle{#1}}
\def\author#1{\gdef\@author{#1}}
\def\engauthor#1{\gdef\@engauthor{#1}}
\def\lab#1{\gdef\@lab{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\engsupervisor#1{\gdef\@engsupervisor{#1}}
\def\and{%%   % \begin{tabular} 
  \end{tabular}%
  \hskip 1zw plus .01fil%
  \begin{tabular}[t]{c}%% \end{tabular}
  }
\def\@maketitle{\newpage%
  \null%
  \begin{center} %
   \vspace*{0truemm} % added for pLaTeX
   {\LARGE\bf \@title \par } %
{\large  \@author （研究指導教員　\@supervisor） \par }%
   \vspace*{3truemm}
  {\large\bf \@engtitle \par } %
  {\normalsize\bf \@engauthor \quad (Supervised by \@engsupervisor ) \par } 
  \end{center}%
  \vspace{1zw}
}

\def\thesection{\arabic{section}.}
%\def\thesubsection{\arabic{section}$\cdot$\arabic{subsection}}
\def\thesubsubsection{(\arabic{subsubsection})}

\def\@eqnnum{{\rm(\theequation)}} 
\def\eqnarray{%
  \stepcounter{equation}%
  \let\@currentlabel=\theequation
  \global\@eqnswtrue
  \global\@eqcnt\z@
  \tabskip\@centering
  \let\\=\@eqncr
  $$\halign to \displaywidth\bgroup\@eqnsel\hskip\@centering
  $\displaystyle\tabskip\z@{##}$&\global\@eqcnt\@ne
  \hfil$\displaystyle{{}##{}}$\hfil
  &\global\@eqcnt\tw@$\displaystyle\tabskip\z@{##}$\hfil
  \tabskip\@centering&\llap{##}\tabskip\z@\cr}

\def\thebibliography#1{% 参考文献出力命令
  \vskip 1zh plus .2ex minus .2ex 
  \noindent{\normalsize\bf 参考文献}\par\@mkboth{References}{References}
  \small
  \list{\arabic{enumi})}			% ラベルは 1), 2), ...
    {\settowidth\labelwidth{#1)}		% ラベルの幅は [引数]
     \leftmargin\labelwidth		% 左余白はラベル幅
     \parsep \z@ plus 1truept minus 1truept
     \itemsep \z@ plus 1truept minus 1truept
     \advance \leftmargin by \labelsep	% 左余白を \labelsep だけ増す
     \usecounter{enumi}}			% enumi カウンタで文献番号を数える
  \def\newblock{\hskip .11em plus .33em minus .07em}%
  					% \newblock は若干の空きをあける命令  
  \sloppy				% 段落は多少空きが不揃いでもよい
  \clubpenalty=4000 \widowpenalty=4000		% なるべく段落中の１行だけ別ページにならないように
  \sfcode`\.=1000\relax}				% 上の解説参照
\let\endthebibliography=\endlist		% 終わりは list の終わりと同じ
\def\@cite#1#2{$^{\hbox{\scriptsize{#1\if@tempswa , #2\fi})}}$}
%\def\@cite#1#2{{#1\if@tempswa , #2\fi})}

\def\section{\@startsection {section}{1}{\z@}{.8ex plus .5ex minus 
 .2ex}{.5ex plus .2ex}{\center \large\bf}}
\def\subsection{\@startsection{subsection}{2}{\z@}{.8ex plus .5ex minus 
 .2ex}{.5ex plus .2ex}{\normalsize\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}{.8ex plus 
.5ex minus .2ex}{.5ex plus .2ex}{\normalsize}}
\def\paragraph{\@startsection
 {paragraph}{4}{\z@}{0.5ex plus .3ex minus .2ex}{-1em}{\normalsize\bf}}
\def\subparagraph{\@startsection
 {subparagraph}{4}{\parindent}{0.5ex plus .3ex minus 
 .2ex}{-1em}{\normalsize\bf}}

\def\labfig#1{\label{fig:#1}}
\def\labtab#1{\label{tab:#1}}
\def\labeq#1{\label{eq:#1}}
\def\reffig#1{{\bf Fig.}\ref{fig:#1}}
\def\reftab#1{{\bf Table }\ref{tab:#1}}
\def\refeq#1{{\bf eq.}(\ref{eq:#1})}

\def\fnum@figure{{\bf Fig.}\thefigure}
\def\fnum@table{{\bf Table\ }\thetable}

\long\def\@caption#1[#2]#3{\par\addcontentsline{\csname
  ext@#1\endcsname}{#1}{\protect\numberline{\csname 
  the#1\endcsname}{\ignorespaces #2}}\begingroup
    \@parboxrestore
%    \normalsize
    \small\bf
    \@makecaption{\csname fnum@#1\endcsname}{\ignorespaces #3}\par
  \endgroup}

\long\def\@makecaption#1#2{% 図・表の見出しを作る命令
   \vskip -5\p@			% 10pt 上に進む 
   \setbox\@tempboxa\hbox{#1 #2}% 「図1 何々」の形の箱を作る
   \ifdim \wd\@tempboxa >\hsize % 箱が 1 行に入りきらないなら
     \begin{list}{#1}{
       \leftmargin 2zw \itemindent 0ex \labelsep 1ex%
       \labelwidth \leftmargin%
       \addtolength{\labelwidth}{-\itemindent}%
       \addtolength{\labelwidth}{-\labelsep}%
       \rightmargin=\leftmargini%
       \addtolength{\rightmargin}{-\itemindent}}%
       \item #2		% 通常の段組として組む（うそ）
     \end{list}\par%
   \else			% そうでなければ
       \hbox to\hsize{\hfil\box\@tempboxa\hfil}% 箱を中央揃えで出力  
   \fi}

\def\deg{${}^\circ$}
\def\atan2{\mbox{atan2}}
\def\arg{\mbox{arg}}

\def\eqnarray{%
  \stepcounter{equation}%
  \let\@currentlabel=\theequation
  \global\@eqnswtrue
  \global\@eqcnt\z@
  \tabskip\@centering
  \let\\=\@eqncr
  $$\halign to \displaywidth\bgroup\@eqnsel\hskip\@centering
  $\displaystyle\tabskip\z@{##}$&\global\@eqcnt\@ne
  \hfil$\displaystyle{{}##{}}$\hfil
  &\global\@eqcnt\tw@$\displaystyle\tabskip\z@{##}$\hfil
  \tabskip\@centering&\llap{##}\tabskip\z@\cr}

\newcounter{stepnumber}
\newenvironment{stepping}{\usecounter{stepnumber}}{}%
\def\step{%
  \addtocounter{stepnumber}{1}%
  \parindent=0truept %
  \par%
  {\bf Step \arabic{stepnumber}.}%
  \hspace{1em}}

\def\quotation{% \begin{quotation} で実行される命令
  \list{}{% \list は \begin{list} で実行される命令
    \listparindent=5ex		% 段落の頭下げ
    \itemindent=\listparindent	% 項目の頭下げも同じ
    \rightmargin\leftmargin	% 左右の空白を等しく
    \parsep 0truept plus 1truept}
  \item[]}
\let\endquotation=\endlist	% \end{quotation} で実行される命令

\def\quote{% \begin{quote} で実行される命令
  \list{}{\rightmargin\leftmargin}\item[]}
			% 段落の頭下げをしない点が quotation と異なる
\let\endquote=\endlist% \end{quote} で実行される命令

\newcount\@itemdepth \@itemdepth = 0
\def\itemize{%
  \ifnum %
    \@itemdepth >3 \@toodeep%
  \else %
    \advance\@itemdepth \@ne%
    \edef\@itemitem{labelitem\romannumeral\the\@itemdepth}%
    \list{\csname\@itemitem\endcsname}{%
      \def\makelabel##1{\hss\llap{##1}}%
      \topsep 3truept%
      \partopsep 0truept%
      \parsep 0truept%
      \itemsep 0truept}%
  \fi}
\let\enditemize =\endlist

\newcount\@enumdepth \@enumdepth = 0
\@definecounter{enumi}
\@definecounter{enumii}
\@definecounter{enumiii}
\@definecounter{enumiv}
\def\enumerate{%
  \ifnum %
    \@enumdepth >3 \@toodeep
  \else%
    \advance\@enumdepth \@ne %
    \edef\@enumctr{enum\romannumeral\the\@enumdepth}%
    \list{\csname label\@enumctr\endcsname}{%
      \usecounter{\@enumctr}%
      \def\makelabel##1{\hss\llap{##1}}
      \topsep 3truept%
      \partopsep 0truept%
      \parsep 0truept%
      \itemsep 0truept}%
  \fi}
\let\endenumerate =\endlist

% フロートの各設定
\setcounter{topnumber}{3}
\def\topfraction{.95}
\setcounter{bottomnumber}{2}
\def\bottomfraction{.95}
\setcounter{totalnumber}{4}
\def\textfraction{.05}
\def\floatpagefraction{.5}

