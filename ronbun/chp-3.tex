\chapter{ハードウェア}
(sectionのみしか書けていない。)
前章で述べた機能を実現するため、2種類のロボットが必要になる。
\par 1つ目は、植物を自律的に移動させる自律移動ロボットでは、プラットフォームに植物と各種センサ類を搭載する。
これらをコンピュータで制御することで能動的な行動を実現する。
ロボットの行動はセンサ情報を基にしており、植物にとってより良い環境へ移動を行う。
これが植物の自律的な行動である。
\par 2つ目の、植物に水分を与えるロボットは、接近した自律移動ロボットの植物に水分を与える。
それは、あたかも動物が水場で水分を摂取しているかのように、能動的な行動を示すようなっている。
\par こらら2つのロボットを1つのシステムとし、植物自律化による自己育成システムを体現する。

\section{自律移動ロボット}
%全体的な筐体とか図を見せながら軽く触れる
%電装系も概要のfig2を出す。
動物は一日中行動を行うものではなく、日中ないし夜間のどちらか一方で活動している。
植物が自律的な行動を行う場合、日中行動を行う必要になる。
この場合は常に動きまわる必要はなく、自律的に必要に応じた行動が求められる。
動物の機能を大きく分けて考えると、物事を判断する頭脳、自他の状況を認知する感覚器官、行動を行うための四肢を有している。
これら機能をロボットに置き換えることで、植物を自律的に行動させることが可能となる。
\par 初めに頭脳として小型コンピュータを用いる。
これは自律移動ロボットの要にあたるたる。
他の要素が接続しやすいよう、低レベルなインタフェースを備え、汎用性に長けた物が必須となる。
\par 次に感覚器官として各種センサを用いる。
センサはADコンバータを通してコンピュータと接続し、逐次環境情報を取得する必要がある。
\par 最後に四肢としてタイヤを移動機構に用いる。
タイヤの場合モータとエンコーダを用いることで、移動と同時に座標の取得が可能となる。
モータはコンピュータで制御され、自律的な行動が行えるようなっている。

\subsection{駆動部}
対向２輪型を選んだ理由
要の駆動部、計算して出したんだよ
重くてもOKってのを見せる。
計算の結果このトルクとか回転数が必要になった
タイヤは多少の段差、室内限定ではコードを乗り越えられる的な感じで乗り切る
ぶっちゃけ時速は10km/h出るけど、仕方ない。適当にする。
そしたら12vバッテリーで駆動できていいじゃんってのをまとめる。

\subsection{モータドライバic}
このモータ動かすためにIC必要ね
モータ電流値をだす。
この値です。
ならこれ以上容量必要ね
DCならPWMで速度制御しやすいね、だからこれ
後述するけど、ソフトでもPWMやりやすいね
\subsection{エンコーダ}
正直パルス多い。200p/r
精度良くなら1000もあるけど、どうして２００？
決めてなかった。ただ、手元にあった。それだけ。
んー。４低倍で800。更にギアかまして倍の1600。んー
モータとタイヤ直結だからそこそこのパルス数は必要
だけど、コンピュータ的に多すぎるのはダメだkら、、、このくらい？根拠ないけど。
適切なパルス数をどこかの文献から引っ張る？
適切に参考文献使うか。
それで解決しよう。ダメでもどうにか
\subsection{制御コンピュータ}
linuxが走るコンピュータ欲しかった。それはプラットフォームが云々、今後のROSとか詳しいことは後述で
さらに直接ピンが出てれば直接操作できていいね。的な。
それでRPI3が小型で低消費電力で安価だった。比較の必要はないと思う、これはみんなわかってる。（と思う。
\subsection{センサ}
環境認識にセンサの搭載は必須である
今回は動物のように状態を認知できることに着眼し、照度、水分、温湿度の３つのセンサを搭載した（これはもっと前の方で行ったほうがいいかも）
それぞれのセンサはアナログ値で出力される。これは後述するArduinoでAD変換され制御コンピュータに送られる。
\subsubsection{照度センサ}
図００に示す。照度センサにはCdSセルと固定抵抗器を用いて作成した。
固定抵抗器の抵抗値000Ωは実験的に算出したもので、運用環境において照度の平均的な値が出力されるよう調整を行った。
回路図は図００のようになっている。
%固定抵抗の０００Ωは実験の結果この値だと低すぎず高すぎず、できるだけ多くの変化を観測することが可能な値になっている。
%（って、いう時どう書けばいいかな？）
アナログ値で
\par また、このモジュールをプラットフォーム上に３つ搭載している。
これはセンサが植物の葉で日陰に入ってしまう事を考慮している。
ロボットが移動を行うと光源の位置や姿勢が変化し、結果的に葉の影の位置も変わってしまう。
１つのセンサでは対処しきれないため、複数箇所に設置をしている。
\subsubsection{土壌水分センサ}
土壌水分の計測には図００のように土に２本の電極を土壌に刺し、抵抗値の変化を水分量の変化として捉えている。
土壌水分が多い場合は抵抗値が低くなり多くの電流が流れ、逆に水分量が少ない場合は抵抗値が高くなり電流が流れづらくなっている。
この抵抗値は２本の電極の間隔が非常に重要なため、電極は次の図００のような音叉の形をした物を利用する。
既成品を利用し間隔が固定されるため、差し替え時による抵抗値の誤差は少なくなる。
\par このセンサの値をコンパレータLM393に通して出力をしている。
LM393はオペアンプを内蔵しており、微小な変化量の土壌センサを0V~5Vのアナログ値で出力する。
これをArduinoで読み取ることで水分量のモニタを行っている。

\subsubsection{温湿度センサ}
%環境の温湿度を認知するためにセンサを搭載した
%測定範囲は日本の平均的な（参考文献、気象庁）をもとに、次のようなものが求めれた。
%なのでこのセンサなら
%温湿度センサは市販品のDHT11を
%使った。
%設置場所は百葉箱を意識し、塩ビの中に入れた。（正直、コンピュータとかで温まっちゃうけどさ笑）
図００に示す温湿度センサDHT11は
なお、湿度は本実験の環境情報として不必要なものとしているが、将来のために設置と計測を行っている。
\subsubsection{Arduino}
これらセンサの値をAD変換しRaspberryPi3に送る必要がある。
まず、RPi3はアナログ入力は対応していない、そこでAD変換が必要
次に外部からの送り方は個別にGPIOでもいいが、センサ情報は同期取りたいので１つの機器でまとめて送る（なぜ？って聞かれたら微妙だけど）
まとめて送るためにはspiとかserialあるけど、今回は汎用的なSerial通信にした。
これらをまとめて搭載し、手軽にプログラミングできて、安価なのがArduinoでした。（他にもあるかもだけど）
（情報量多いし、資産としても悪くないかなって、稲垣先生も納得するかもって。わかんかいけど）
詳しいソフトは後述する。
\subsection{DC-DC コンバータ}
これらに電源を供給するものが必要になる
12Vのモータと同じ電源を利用する、サイズダウンのため
なのでコンバータが必要になる。
そこで、コンバータの必要スペックを計算する
５Vの各機器必要電流値を表で出す。
で、こんだけの電流が必要
なので、余裕のあるこれにした。
\subsection{バッテリー}
移動して運用するためにはバッテリーが必要となる。
上記のシステムをN時間稼働すると００００AH以上のバッテリーが必要となる。
計算式
なのでこれを選んだ

\section{給水ステーションシステム}
植物が自律的な行動を行えるようになったが、自ら水道の蛇口を捻り水分補給が行えるわけではない。
そこで自律的に行動を行っている植物に対し、水分を与えるロボットが必要となる。
植物が補給する水分量は限られており、小型なタンクで十分である。
小型であるため置き場所を問わず、実験に適したになっている。
\par 自律的に行動を行っている植物の接近を検知し、水分を与える場合はサーボモータを用いたバルブ機構を開閉し、植物に水分を与えている。

\subsection{筐体}
植物の高さからこれにした
３方向からの給水、横付け可能な形状
軽量、サビづらい。

\subsection{タンク}
１日で必要な水の量から適当なサイズのタンク
入手性より500lmのペットボトル
重すぎない。
タンクの上部に穴開けて、空気入れる工夫とかも

\subsection{ホース}
ホースは
